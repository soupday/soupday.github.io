~~~~~~~~~~~~~~~~~~~~~~~
 Import & Export Panel
~~~~~~~~~~~~~~~~~~~~~~~

.. image:: images/pipeline_panel.jpg

Rendering & Animation
=====================

This section is for importing characters for rendering and/or animation. There are no specific requirements
for this and you can export characters from CC3 or iClone in any particular way you want, so long as the target tool is to Blender.

Import Character
----------------

This button imports a character and sets up the materials, optional light and physics.

If the Lighting option is selected it will also set up a lighting arrangement
similar to that of the Character Creator editor default lighting set up, but this will replace any existing lighting
and rendering setup. The lighting used and the material build mode can be changed in the :doc:`prefs`.

If the Physics option is selected then cloth physics vertex groups and modifiers are generated for any of
the mesh objects & materials that PhysX weight maps. All of which can be changed later in the :doc:`physics`.

Morph Editing
=============

This section is to facilitate creating character morph sliders for CC3. The typical process is to import a character,
adjust the mesh, with the mesh editing and sculpting tools, for the shape of the morph. Then export the new mesh
back to CC3 to be made into a morph.

There are two main ways of achieving this. One is with an FBX character export, the other with an OBJ character export.
The procedures for exporting and subsequent re-importing are different for each.

Character Creator also requires that an **FbxKey** or **ObjKey** must be generated by the export process and used in the re-import process.
This key is uniquely generated for each character export and is conditional on certain export settings.

Exporting a Character FBX with FbxKey
-------------------------------------

Export from the file menu: **File** -> **Export** -> **FBX (Clothed Character)**

.. image:: images/export_fbx_menu.jpg

With the options:

- Target Tool: *Blender*
- FBX Options: *Mesh*
- Texture Settings: *Any*
    - Generally best not to embed textures.
    - *Do not convert to BMP*
- Default Pose: *Any*

.. image:: images/export_fbx_morph_options.jpg

Exporting a Character OBJ with ObjKey
-------------------------------------

Export from the file menu: **File** -> **Export** -> **OBJ** -> **Nude Character in Bind Pose**

.. image:: images/export_obj_nude_menu.jpg

With the default options:

.. image:: images/export_obj_nude_options.jpg

The **Nude Character in Bind Pose** export does not generate any materials, which means that
the import into Blender will have no textures.

Import For Morph
----------------

This button will import the character with the best settings for making character morphs.
Specifically the character is imported without animation, in the bind pose, and requires the presence of an **FbxKey** or **ObjKey** file
as described in the export procedures above.
A warning message will be displayed if there isn't one.

Optional lighting can be set up. Physics should *not* be applied for morph creation.

Export Character Morph
----------------------

Once you have altered the character to your satisfaction you can export it back to Character Creator.

Importing a Character FBX with FbxKey
-------------------------------------

Import from the File menu: **File** -> **Import...**

.. image:: images/import_fbx_menu.jpg

Find and select the FBX file exported from Blender.

Before the import begins you should be presented with the "Create Assets" window. It should have the **Decrypt Key**
(i.e. the **FbxKey**) automatically filled in as it is copied with the FBX export.

.. image:: images/import_fbx_key_options.jpg

Press OK to continue the import. After a while you should be presented with a status report window summarising the contents.
Any problems with the import will be displayed here.

If this fails with a decrypt key warning, this means that the character body mesh is not the same topology as was originally
exported from CC3. There can be **no** changes to the mesh vertex structure or order. You can deform the mesh as much as you like
but you cannot add or remove **any** vertices or faces from the character body mesh. Some Blender modifiers may also re-arrange the vertex order
and make the mesh invalid.

.. image:: images/import_fbx_report.jpg

Press OK and the import process will complete.
Note: The import character process does not re-import the textures and you will be left with a textureless character.
However you can still make morph sliders from this character.

**Create** -> **Head & Body Morph Sliders**

.. image:: images/import_create_head_body_slider.jpg

And this will create a full body head/body slider you can apply to the neutral character base.

Importing a Character OBJ with ObjKey
-------------------------------------

This time we import from the Create menu: **Create** -> **Morph Slider Editor**

.. image:: images/import_slider_editor.jpg

Here we create a morph slider directly from the OBJ file.

- You can select the default morph as the source morph to create a full body morph for the neutral base.
- Or you can select the current morph as the source morph to create a morph relative to your current character.
- In the target morph, select the OBJ file exported from Blender.
  The **Checksum File** (i.e. the **ObjKey**) should be filled in automatically as it is copied during the export.

.. image:: images/import_slider_editor_options.jpg

Accessory Editing
=================

Import For Accessory
--------------------

Imports character.

Export Accessory
----------------

Exports an object as an accessory.