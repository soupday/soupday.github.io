<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Physics &mdash; CC/iC Blender Tools 1.3.8 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Spring Bone Rigging" href="spring-bones.html" />
    <link rel="prev" title="Expression Wrinkles" href="expression-wrinkles.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CC/iC Blender Tools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="adv-usage.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">CC - Blender - Unity Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="animation.html">Animation</a></li>
<li class="toctree-l1"><a class="reference internal" href="adv-animation.html">Advanced Animation</a></li>
<li class="toctree-l1"><a class="reference internal" href="expression-wrinkles.html">Expression Wrinkles</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Physics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adding-and-editing-physics">Adding and Editing Physics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#importing-with-physics">Importing with Physics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Cloth Physics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cloth-simulation-controls">Cloth Simulation Controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cloth-collision">Cloth Collision</a></li>
<li class="toctree-l4"><a class="reference internal" href="#proxy-cloth-collision">Proxy Cloth Collision</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cloth-physics-cache-blender-point-cache">Cloth Physics Cache - (Blender Point Cache)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-adding-object-physics">Workflow: Adding Object Physics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-physics-weight-mapping">Workflow: Physics Weight Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-exporting-according-to-pipeline">Workflow: Exporting According to Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#actions-to-aid-cloth-simulation">Actions to Aid Cloth Simulation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spring-bones.html">Spring Bone Rigging</a></li>
<li class="toctree-l1"><a class="reference internal" href="sprig-bones-blender.html">Spring Bone Usage In Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="create.html">Character Object Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scene.html">Scene Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="materials.html">Material Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="eyes.html">Eyes</a></li>
<li class="toctree-l1"><a class="reference internal" href="skin.html">Skin</a></li>
<li class="toctree-l1"><a class="reference internal" href="teeth.html">Teeth, Gums and Tongue</a></li>
<li class="toctree-l1"><a class="reference internal" href="powers.html">Notes on Power Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="remap.html">Notes on Remapping Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="mix.html">Notes on Color Mixing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CC/iC Blender Tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Physics</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/physics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="physics">
<h1>Physics<a class="headerlink" href="#physics" title="Permalink to this headline"></a></h1>
<section id="adding-and-editing-physics">
<h2>Adding and Editing Physics<a class="headerlink" href="#adding-and-editing-physics" title="Permalink to this headline"></a></h2>
<section id="importing-with-physics">
<h3>Importing with Physics<a class="headerlink" href="#importing-with-physics" title="Permalink to this headline"></a></h3>
<img alt="_images/physics_selected.png" src="_images/physics_selected.png" />
<p>When the <em>Physics</em> option is selected in the <strong>Import/Export</strong> panel then when the character is imported, <em>cloth physics</em>, <em>vertex groups</em> and <em>modifiers</em> will be automatically generated for any of the mesh objects &amp; materials that have PhysX weight maps. All of which can be changed at will should you need to.</p>
<p>Thus, to import a character with physics enabled (highlighted blue), in the <strong>Import/Export</strong> panel follow the procedure for <a class="reference internal" href="usage.html#standard-import"><span class="std std-ref">Standard Import</span></a> (do not use the standard fbx importer for this).</p>
<div class="admonition-important-consideration-for-cloth-simulation admonition">
<p class="admonition-title">Important Consideration For Cloth Simulation</p>
<p>Always allow Blender to compute the full range of frames for any cloth simulation by playing the whole animation through with no <a class="reference internal" href="adv-usage.html#frame-dropping"><span class="std std-ref">Frame Dropping</span></a>.</p>
<p>This will be initially slow; however this <strong>must</strong> be done in order to cache the cloth calculations.</p>
<p>Once this is done you may then spool through the animation or enable <a class="reference internal" href="adv-usage.html#frame-dropping"><span class="std std-ref">Frame Dropping</span></a> to get closer to real time playback (as much as Blender allows before requiring a re-calculation).</p>
<p>Failure to do this will cause the cloth simulation to break and behave erratically.</p>
</div>
</section>
<section id="id1">
<h3>Cloth Physics<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<p>The <strong>Cloth Physics</strong> panel in the CC/iC Create Tab contains a comprehensive set of controls to adjust the physics parameters of the currently selected object.</p>
<img alt="_images/b-pys-tools.png" class="align-left" src="_images/b-pys-tools.png" />
<p><strong>Character Physics</strong> - Apply/Disable all physics.  This will (re)apply or disable all of the physics settings contained in the CC/iC character export (along with any manually added physics settings). This applies to <strong>Cloth Physics</strong>, <strong>Hair Physics</strong> or both.</p>
<p><strong>Cloth Simulation</strong> - This section will change depending on the <em>currently selected object</em> in ‘Object Mode’. When an object has no active physics, then an option to ‘Add Cloth Physics’ is available.</p>
<p>If the object had physics enabled already, then the <strong>Cloth Simulation Controls</strong> are shown (detailed below).</p>
<p><strong>Cloth Collision</strong> - This controls wether or not the <em>currently selected object</em> will act as a collider for cloth physics.  When an object is not set as a a cloth collider, it will be ignored by the cloth simulation.</p>
<p>The <strong>Use Proxy</strong> option allows the creation of a proxy collider which can be decimated (<em>via</em> the decimate value slider) in order to simplify the calculations required by the simulation.  The use of a proxy collider potentially of great utility and is discussed in the <a class="reference internal" href="#cloth-collision"><span class="std std-ref">Cloth Collision</span></a> section below.</p>
<p><strong>Mesh Correction</strong> - Settings to help improve cloth simulation.</p>
<ul class="simple">
<li><p>Fix Degenerate Mesh: This will remove degenerate mesh elements from the mesh - this include loose vertices, orphaned edges, zero length edges etc.  The presence of these elements may cause problems with simulation.</p></li>
<li><p>Separate Physics Materials: This will separate the object by material and apply physics to the separated objects that have weight maps.  This may increase performance where only a small part of an object is simulated.</p></li>
</ul>
<p><br /><br /></p>
<section id="cloth-simulation-controls">
<h4>Cloth Simulation Controls<a class="headerlink" href="#cloth-simulation-controls" title="Permalink to this headline"></a></h4>
<p>These controls are the settings ONLY for the <em>currently selected object</em> (i.e. each physics enabled object has its own unique settings).</p>
<img alt="_images/b-pys-cloth.png" class="align-left" src="_images/b-pys-cloth.png" />
<p><br />
- <strong>Presets</strong> - This will impose physics settings on the object that approximate the behavior of the named material (Cotton, Silk etc).  <em>These values are tuned to deliver similar responses for cloth hair and dynamic spring bone behavior</em>.</p>
<p><br />
- <strong>Cloth Settings</strong> are a convenient access point to the standard Blender cloth physics settings (by default seen in the <em>Physics Properties</em> of the standard <em>Properties</em> pane). These are only shown when an object (e.g. a clothing item) has had ‘Cloth Physics’ applied to it and is selected.</p>
<p><br /></p>
</section>
<section id="cloth-collision">
<h4>Cloth Collision<a class="headerlink" href="#cloth-collision" title="Permalink to this headline"></a></h4>
<p>Any object can be made into a cloth collision object. After activating an object as a cloth collider, a ‘Collision Settings’ foldout will immediately become available:</p>
<img alt="_images/b-pys-collider.png" class="align-left" src="_images/b-pys-collider.png" />
<p><strong>Collision Settings</strong> are the standard blender collision settings (by default seen in the <em>Physics Properties</em> of the standard <em>Properties</em> pane).  These are only shown when an object has had ‘Collision Physics’ applied to it and is selected.  This is mostly applicable to the character’s body since Blender uses the character mesh as a collider for physics simulation.</p>
<p>An object which has a cloth simulation on it can also act as a cloth collider. This may produce undesirable results when various cloth objects conflict with each other.  Such conflict can be avoided by baking the cloth simulations in layers - as outlined in the <a class="reference internal" href="#cloth-physics-cache-blender-point-cache"><span class="std std-ref">Cloth Physics Cache - (Blender Point Cache)</span></a> section.</p>
</section>
<section id="proxy-cloth-collision">
<h4>Proxy Cloth Collision<a class="headerlink" href="#proxy-cloth-collision" title="Permalink to this headline"></a></h4>
<p>If an object is not simulated (it has no physics and is only animated by skeletal movements) then instead of using the actual (visible) object, a (invisible) proxy object can be created which acts as a cloth collider.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A proxy collider can be used in cases where there is some visible mesh penetration of the simulated cloth by the character’s body.</p>
<ul class="simple">
<li><p>If the actual body mesh is being used as a collider then any editing of that mesh in order to ‘fix’ any mesh penetration will change the shape of the collider itself and have an effect on the simulation.</p></li>
<li><p>If a proxy collision object has been created, then any subsequent editing of the body mesh (for example deleting any faces that penetrate the cloth mesh) will have no effect on the proxy collider and will not change the simulation.</p></li>
</ul>
<p>Thus a proxy collider lets you use the full volume of the characters body as a cloth collider, without the need to have visible mesh in the parts covered by clothing.  This is similar to the ‘Delete hidden Faces’ functions of Character Creator - but it retains the effective volume of the full original mesh shape.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important that to properly use a character body as a proxy collider that you must export the full mesh from Character Creator: you cannot use ‘Delete Hidden Faces’ if you intend to use a proxy collider for the character body.</p>
</div>
<p>If an object is suitable for being made into a proxy, then the ‘Use Proxy’ toogle will be available in the ‘Cloth Collision’ pane.</p>
<blockquote>
<div><img alt="_images/bl-cloth-col-proxy-toggle.png" src="_images/bl-cloth-col-proxy-toggle.png" />
</div></blockquote>
<p>The decimate value is the factor by which the proxy is simplified (using a standard Blender decimate modifier).</p>
<p>Once the ‘Add Cloth Collision’ button is pressed (with ‘Use Proxy’ toggled ON) then a proxy collider is created and decimated by the value in the decimate field and a ‘Show Collision Proxy’ toggle will be available.</p>
<blockquote>
<div><img alt="_images/bl-cloth-col-proxy-show.png" src="_images/bl-cloth-col-proxy-show.png" />
</div></blockquote>
<p>The ‘Show Collision Proxy’ toggle will allow you to view the proxy collision object in isolation (it actually shows the object in Blender’s <a class="reference external" href="https://docs.blender.org/manual/en/latest/editors/3dview/navigate/local_view.html">Local View</a>)</p>
<p>You may then freely edit the original object (again Local View is helpful here) in order to meet your needs.</p>
</section>
<section id="cloth-physics-cache-blender-point-cache">
<h4>Cloth Physics Cache - (Blender Point Cache)<a class="headerlink" href="#cloth-physics-cache-blender-point-cache" title="Permalink to this headline"></a></h4>
<p><strong>Animation Range</strong> - The range of the animation can be quickly manipulated here. Two distinct frame range functions are available:</p>
<ul class="simple">
<li><p><strong>Use Preview Range</strong> <img alt="prev" src="_images/bl-timeline-phys-prev.png" /> - This will activate the <em>Viewport Preview Range</em>. This can be set in the timeline window, for more details see the <a class="reference external" href="https://docs.blender.org/manual/en/latest/editors/graph_editor/introduction.html#graph-preview-range">Preview Range</a> section of the official Blender documentation.</p></li>
<li><p><strong>Expand Animation Range</strong> <img alt="exp" src="_images/bl-timeline-phys-exp.png" /> - This tool is used to increase the scene animation frame range to the frame range of the current action on the character (it will never decrease the frame range).</p></li>
<li><p><strong>Fit Animation Range</strong> <img alt="fit" src="_images/bl-timeline-phys-fit.png" /> - This tool will always match the scene frame range to the frame range of the current action on the character.</p></li>
</ul>
<p><strong>‘Cloth Simulation’ (cache)</strong> - Allows quick access to the physics baking functions for the object’s Cloth Physics.</p>
<ul>
<li><p><strong>Reset</strong> <img alt="reset" src="_images/bl-cloth-phys-reset.png" /></p>
<blockquote>
<div><p>Resets the physics point cache on the currently selected object and synchronizes the physics point cache ranges on the current object to fit the current scene animation range. i.e. If the point cache frame range does not cover the current scene range (or preview range) it will be extended to fit.</p>
</div></blockquote>
</li>
<li><p><strong>Bake</strong> <img alt="bake" src="_images/bl-cloth-phys-bake.png" /></p>
<blockquote>
<div><p>This will bake the physics simulation to Blender’s point cache for the currently <strong>selected</strong> cloth object.</p>
</div></blockquote>
</li>
<li><p><strong>Free</strong> <img alt="free" src="_images/bl-cloth-phys-free.png" /></p>
<blockquote>
<div><p>This will clear the point cache for the selected object.</p>
</div></blockquote>
</li>
</ul>
<div class="admonition-the-baking-system-can-be-used-to-properly-simulate-layers-of-clothing admonition">
<p class="admonition-title">The baking system can be used to properly simulate layers of clothing.</p>
<p>This example uses the Cloth Physics Tools in the CC/iC Create tab: If you are using several layers of clothing the following procedure will be of use.</p>
<ol class="arabic simple">
<li><p>Select the innermost layer of clothing (e.g. a skirt or a dress) and <strong>Add Cloth Physics</strong> to it (with the button of the same name).</p></li>
<li><p>Select the character’s body and <strong>Add Cloth Collision</strong> to it (named button).  This will allow the simulated cloth to collide with the character body.</p></li>
<li><p>Select the innermost clothing object and ‘<strong>Bake the Simulation</strong>’.</p></li>
<li><p>Now we can simulate the next layer of clothing.  Select the object of the next layer of clothing (e.g. a long coat or shawl) and <strong>Add Cloth Physics</strong> to it.</p></li>
<li><p><strong>We can now use the baked simulation of the innermost layer as a collision object</strong>.  Thus we can <strong>Add Cloth Collision</strong> to the innermost object (used in step 1.).  This will allow the simulation of the outer object to collide properly with the inner object without making a terrible mess of the inner object’s simulation (since it is now baked in).</p></li>
<li><p>Select the outer clothing object and ‘<strong>Bake the Simulation</strong>’.</p></li>
<li><p>The outer object can be used as a collision object for the hair simulation.  Again, this is done with the <strong>Add Cloth Collision</strong> button for the outer object.</p></li>
<li><p>Finally, the Spring Bone Hair simulation can now be baked (in the CC/iC Pipeline Tab - Scene Tools)</p></li>
</ol>
<p>This builds up layers of simulation that aren’t allowed to interfere with each other (since that often causes huge problems with Blender physics simulation). Below is an example render of this multi layered baking approach.</p>
<blockquote>
<div><div class="youtube_wrapper" style="">
<iframe allowfullscreen="true" src="https://www.youtube.com/embed/7Nr_LADT3yE" style="border: 0; height: 345px; width: 560px">
</iframe></div></div></blockquote>
</div>
<p>If you wish to manipulate ALL of the physics caches simultaneously then tools to do that are available in the Scene Tools section of the CC/iC create tab; see the <a class="reference internal" href="scene.html#simulation-baking-point-cache"><span class="std std-ref">Simulation Baking (Point Cache)</span></a> documentation for further details.</p>
<p>The example below shows a standard ‘Silk’ preset applied to a dress object during an animation (mesh highlighted for clarity).</p>
<figure class="align-center" id="id2">
<img alt="_images/dress_physics.gif" src="_images/dress_physics.gif" />
<figcaption>
<p><span class="caption-text"><em>Standard Silk Simulation</em></span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition-hair-physics admonition">
<p class="admonition-title">Hair Physics</p>
<p>Whilst early versions of hair from Character Creator have properly defined physics properties, certain newer ones may not simulate correctly.  Smart Hair should now simulate correctly (as of version 1.3.6).</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="workflow-adding-object-physics">
<h3>Workflow: Adding Object Physics<a class="headerlink" href="#workflow-adding-object-physics" title="Permalink to this headline"></a></h3>
<p>This workflow discussion is specifically aimed at adding physics properties that are suitable for return to Character Creator or for further use in Unity.  For the purpose of <strong>only</strong> adding physics for use in <strong>Blender</strong> then please consult the official <a class="reference external" href="https://docs.blender.org/manual/en/latest/physics/index.html">Blender Physics documentation</a> for details.</p>
<p><strong>Export According To Pipeline</strong></p>
<p>As with the <a class="reference internal" href="create.html#adding-objects-to-characters"><span class="std std-ref">Adding Objects to Characters</span></a> workflow, it is imperative that the character you wish to work with is exported from Character Creator with the appropriate settings for the pipeline being used.</p>
<ul class="simple">
<li><p>If you wish to add a physics enabled item and then return the character to Character Creator, the please export from CC using the <a class="reference internal" href="pipeline.html#blender-round-trip-workflow"><span class="std std-ref">Blender Round Trip Workflow</span></a>.</p></li>
<li><p>If you intend solely to use the character and physics enabled item in Blender, then use the basic <a class="reference internal" href="usage.html#export-settings-from-character-creator-or-iclone"><span class="std std-ref">Export Settings From Character Creator or iClone</span></a>.</p></li>
<li><p>If you wish to have a character that is editable (and indeed re-editable) in Blender which will ultimately be destined for Unity, then follow the directions in the <a class="reference internal" href="pipeline.html#unity-round-trip-workflow"><span class="std std-ref">Unity Round Trip Workflow</span></a>.</p></li>
</ul>
<p><strong>Import Character</strong></p>
<p>The correctly exported character should be imported into Blender with a <a class="reference internal" href="usage.html#standard-import"><span class="std std-ref">Standard Import</span></a> (physics will be deliberately added in a later step).</p>
<p>The item to which physics is to be added can either be part of the export from Character Creator or can be created directly or appended from a library file (if you are adding a new item then please follow the instructions in <a class="reference internal" href="create.html#adding-objects-to-characters"><span class="std std-ref">Adding Objects to Characters</span></a> to correctly incorporate it).</p>
<ul class="simple">
<li><p>Open the <em>CC/iC Create</em> tab.</p></li>
</ul>
<ul>
<li><p>In the ‘Character Physics’ section, click on ‘Apply All Physics’. This will enable physics on all the applicable items (colliders for the character body, and cloth for any items that have physics enabled in Character Creator).</p>
<div class="line-block">
<div class="line"><img alt="physChar" src="_images/b-phys-char.png" /></div>
</div>
</li>
</ul>
<ul>
<li><p>In <em>Object Mode</em> select the item to have physics added to it; in the ‘Create/Remove’ section click on ‘Add Cloth Physics’.  This will enable cloth physics for the selected item and add a modifier which uses a <em>weight map</em> texture to control allowed cloth deformation.  Presets for several cloth types are also made available which will control the response of the cloth to cloth simulation.</p>
<div class="line-block">
<div class="line"><img alt="createRemove" src="_images/b-phys-create.png" /></div>
</div>
</li>
</ul>
<p>After Cloth Physics is added, a suitable weight map must be painted onto the object which will control how much the object is permitted to be deformed by cloth physics simulation.</p>
</section>
<section id="workflow-physics-weight-mapping">
<h3>Workflow: Physics Weight Mapping<a class="headerlink" href="#workflow-physics-weight-mapping" title="Permalink to this headline"></a></h3>
<p>Cloth simulation in Character Creator/iClone is controlled not only by the cloth parameters, but also by a monochrome texture or “weight map” which is used to determine the extent to which the cloth is permitted to be moved by the physics simulation (this weight map like all textures uses the model’s UV coordinates).</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="_images/cc-skirt-weight.png"><img alt="_images/cc-skirt-weight.png" src="_images/cc-skirt-weight.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Character Creator Item With Physics Weight Map</em></span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>This Blender add-on allows this weight map to be painted directly onto the item model using Blender’s own texture painting tools allowing fine control.</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="_images/b-skirt-weight.png"><img alt="_images/b-skirt-weight.png" src="_images/b-skirt-weight.png" style="width: 250px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Blender Physics Weight Map Painted on Above Item</em></span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The weight map is monochrome (<em>black</em> and <em>white</em>) and as such uses <em>black</em> to mean that part of the model will not move and <em>white</em> to mean that part of the model can move freely.  The grey scale in-between will permit an increasing amount of movement.</p>
</div>
<img alt="_images/b-phys-weight.png" class="align-left" src="_images/b-phys-weight.png" />
<p>To begin weight map painting, in the ‘Weight Maps’ section click on ‘Paint weight Map’.  This will change Blender into <em>Texture Paint</em> mode, whereupon the Blender texture paint tools may be used (see the documentation on <a class="reference external" href="https://docs.blender.org/manual/en/latest/sculpt_paint/texture_paint/index.html">Blender Texture Painting</a> for further details).</p>
<p>Should you require a different size of weight map (larger or smaller) then (prior to starting the painting) select the desired size of map from the dropdown list and then click ‘Resize Weightmap’.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use the <em>Gradient Fill Mode</em> to easily paint a smooth predictable gradient onto the model.</p>
<p>When weight painting select the <em>Fill Tool</em> on the Left hand side tool strip. <img alt="fillTool" src="_images/b-paint-fill.png" /></p>
<p>Then in the Right hand tool bar select the <em>Tool</em> tab and in the <em>Color Picker</em> switch from <em>Color</em> to <em>Gradient</em></p>
<p><img alt="gradPaint" src="_images/b-gradient-pick.png" /></p>
<p>Set up the gradient as you see fit. Then on the model position the pointer where you wish the gradient to begin, press <strong>CTRL</strong> then press <strong>LMB</strong> move the pointer to wherever you wish the gradient to end (a solid line will be shown) and release the LMB to impose the gradient along the line.</p>
</div>
<p>Once weight painting is complete, then click on ‘Done Weight Painting’</p>
<img alt="_images/b-done-weight.png" src="_images/b-done-weight.png" />
<p>If you are satisfied with the weight painting then click ‘Save’ to store the weight map.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Weight painting physics requires some <em>subtlety</em>, where too much freedom will result in a disastrous simulation in Character Creator and too little will not allow anything visible to happen.</p>
<p>Several attempts will probably be needed before the results are acceptable.</p>
</div>
<p>The images below are the actual results of a weight painting.  The weight painted model (left) only has a small area able to move freely, this is reflected in the Blender cloth simulation (center).  <strong>NB</strong>: The Blender simulation is somewhat different to Character Creator’s and as such should only be used a a guide (grey areas are far more restricted in Blender).  Finally the Character Creator result (right) shows a visible range of motion in accordance with the grey-white painted areas of the weight map.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><img alt="wp_tex" src="_images/b-weightpaint-grad.png" /></p></td>
<td><p><img alt="wp_blender" src="_images/blender_simulation.gif" /></p></td>
<td><p><img alt="wp_cc" src="_images/cc_simulation_lo.gif" /></p></td>
</tr>
<tr class="row-even"><td><p>Weight painted model in Blender</p></td>
<td><p>Wind simulation in Blender</p></td>
<td><p>Idle movement simulation in Character Creator</p></td>
</tr>
</tbody>
</table>
</section>
<section id="workflow-exporting-according-to-pipeline">
<h3>Workflow: Exporting According to Pipeline<a class="headerlink" href="#workflow-exporting-according-to-pipeline" title="Permalink to this headline"></a></h3>
<p><strong>Return to Character Creator:</strong> To return the character to Character Creator follow the procedure described in the Round Trip <a class="reference internal" href="pipeline.html#detailed-workflow"><span class="std std-ref">Detailed Workflow</span></a> section of the documentation: using the ‘Export to CC3/4’ function (Either in the Import/Export section of the <em>CC/iC Pipeline</em> Tab or the Quick Export section of the <em>CC/iC Create</em> Tab).</p>
<img alt="_images/cc4-blender-pipeline-export-panel.png" class="align-center" src="_images/cc4-blender-pipeline-export-panel.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>This export can be re-imported using the ‘Plugins -&gt; Blender Pipeline -&gt; Import Character From Blender’.  The physics will be automatically activated on the newly enabled working object and the physics weight map will be automatically applied along with any parameter settings made in Blender.</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="_images/blender-cc4-phys-weightmaped.png"><img alt="_images/blender-cc4-phys-weightmaped.png" src="_images/blender-cc4-phys-weightmaped.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Newly Physics Enabled Item Returned to Character Creator</em></span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>This item is now ready for use.</p>
<p><strong>Export to Unity:</strong> In the case of further export to Unity, again the positioning and weight painting mean that it can be safely exported to Unity as described in the <a class="reference internal" href="pipeline.html#unity-round-trip-workflow"><span class="std std-ref">Unity Round Trip Workflow</span></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is of immense benefit to <strong>export the model to Unity as a Blend file</strong> and to <strong>export the model directly into the Unity project</strong> (in a folder under /Assets in the Unity project folder structure).</p>
<p>This allows rapid editing of the physics data (and indeed any other aspect of the model):</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Double-click on the blend file from within the Unity project</strong> to begin editing.</p></li>
<li><p>Return to Unity with the <strong>‘Update Unity Project’</strong> function (see <a class="reference internal" href="pipeline.html#unity-round-trip-workflow"><span class="std std-ref">Unity Round Trip Workflow</span></a>).</p></li>
<li><p><strong>Rebuild the cloth physics</strong> with the Unity addon.</p></li>
</ul>
</div></blockquote>
</div>
<p>Once processed in Unity with the ‘Cloth Physics’ feature enabled (see the <a class="reference external" href="https://soupday.github.io/cc_unity_tools/physics.html#cloth-physics">Unity Cloth Physics documentation</a>) then the physics item will be appropriately constraint painted and have the correct colliders associated with it.</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="_images/u-phys-weightmaped-import.png"><img alt="_images/u-phys-weightmaped-import.png" src="_images/u-phys-weightmaped-import.png" style="width: 300px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Unity Constraint Painted In Line With The Blender Weight Map</em></span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="actions-to-aid-cloth-simulation">
<h3>Actions to Aid Cloth Simulation<a class="headerlink" href="#actions-to-aid-cloth-simulation" title="Permalink to this headline"></a></h3>
<p>Sometimes, cloth simulations do not behave as expected. This can be for a number of reasons which include:</p>
<ul class="simple">
<li><p>Improper cloth parameters.</p></li>
<li><p>Improper weight Mapping.</p></li>
<li><p>Mesh errors.</p></li>
<li><p>Mesh distortion.</p></li>
</ul>
<p>The cloth parameters and weight mapping have been discussed above and are principally responsible for how the cloth performs (too much/too little freedom and flexibility etc.) which can be adjusted easily to your needs.</p>
<p>Mesh problems can however cause cloth simulation to fail spectacularly.</p>
<ul>
<li><p>Mesh degeneracy will often cause simulations to fail - examples of this include:</p>
<ul class="simple">
<li><p>Zero length edges</p></li>
<li><p>Zero area faces</p></li>
<li><p>Orphaned/duplicated vertices</p></li>
</ul>
<p>Blender has internal tools to help with these problems (see Blender’s <a class="reference external" href="https://docs.blender.org/manual/en/latest/modeling/meshes/editing/mesh/cleanup.html">Clean Up</a> documentation).</p>
<p>A simple tool has also been provided to rapidly remove most offending items - in the ‘<em>Mesh Correction</em>’ section of the physics foldout, use the ‘<em>Fix Degenerate Mesh</em>’ tool to correct the above problems.</p>
<div class="line-block">
<div class="line"><img alt="fixDeg" src="_images/b-fix-deg.png" /></div>
</div>
</li>
<li><p>Mesh distortion, e.g. meshes that have been folded over themselves can also cause significant problems.</p>
<p>These can be readily corrected by use of the ‘<em>Smooth</em>’ tool in ‘<em>Sculpt mode</em>’.</p>
<p><strong>Please note:</strong> the smooth tool should be used at very low <em>strength</em> (0.075 - 0.100) to avoid doing damage to the mesh.</p>
<div class="line-block">
<div class="line"><img alt="smth" src="_images/b-sculpt-smooth.png" /> <em>Smooth Tool</em></div>
</div>
</li>
</ul>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><img alt="preSmooth" src="_images/b-pre-smh.png" /></p></td>
<td><p><img alt="postSmooth" src="_images/b-post-smh.png" /></p></td>
</tr>
<tr class="row-even"><td><p>Folded, distorted mesh which will cause cloth simulation problems.</p></td>
<td><p>Smoothed mesh to remove folded elements will allow better cloth simulation.</p></td>
</tr>
</tbody>
</table>
<p>For more details please see Blender’s <a class="reference external" href="https://docs.blender.org/manual/en/latest/sculpt_paint/sculpting/editing/sculpt.html">Sculpt Tools</a> documentation.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="expression-wrinkles.html" class="btn btn-neutral float-left" title="Expression Wrinkles" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="spring-bones.html" class="btn btn-neutral float-right" title="Spring Bone Rigging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2022, Victor Soupday.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>